# 12-4
    
    【一种三维超声风速仪的设计_陈威】
    【基于时差法的超声波气体流量测量系统的设计与实现_张锐】

在设计超声波换能器的驱动电路中，采用栅极驱动芯片来设计电路

其中论文2使用[MD1211](https://item.szlcsc.com/datasheet/MD1211LG-G/653778.html)以及论文1采用`IR2104S`，
外加[TC6320](https://ww1.microchip.com/downloads/en/DeviceDoc/20005697A.pdf)

## 单N-沟道驱动

了解下不同MOS驱动芯片工作电压与驱动电流：

|   型号    |  工作电压   |  输出峰值电压  |
|:-------:|:-------:|:--------:|
| TC4426  |   18V   |   1.5A   |
| TC4431  |   30V   |   1.5A   |
| TC4421  |   18V   |    9A    |
| TC4451  |   18V   |   12A    |
| MD1211  | 4.5~13V |    2A    |
| LT1910  |  \>6V   | 高端MOS驱动管 |


# 12-6

## 电容器的频率特性

就电容器的阻抗大小|Z|和等价串联电阻(ESR)的频率特性进行阐述。\
通过了解电容器的频率特性，可对诸如电源线消除噪音能力和抑制电压波动能力进行判断，
可以说是设计回路时不可或缺的重要参数。此处对频率特性中的阻抗大小|Z|和ESR进行说明。

假设角频率为ω，电容器的静电容量为C，则理想状态下电容器的阻抗Z可用公式

    z=1/jωC

由公式可看出，阻抗大小|Z|，与频率呈反比趋势減少。由于理想电容器中无损耗，
故等价串联电阻(ESR)为零。

但实际电容器中除有容量成分Ｃ外，还有因电介质或电极损耗产生的电阻（ESR）及电极或导线产生的寄生电感(ESL)。
因此，|Z|的频率特性如图4所示呈V字型（部分电容器可能会变为U字型）曲线，
ESR也显示出与损耗值相应的频率特性。

![](/picture/11/img_21.png)

![](/picture/11/img_22.png)

低频率范围：\
低频率范围的|Z|与理想电容器相同，都与频率呈反比趋势减少。ESR值也显示出与电介质分极延迟产生的介质损耗相应的特性。

共振点附近：\
频率升高，则|Z|将受寄生电感或电极的比电阻等产生的ESR影响，偏离理想电容器（红色虚线），显示最小值。|Z|为最小值时的频率称为自振频率，此时|Z|=ESR。若大于自振频率，则元件特性由电容器转变为电感，
|Z|转而增加。低于自振频率的范围称作容性领域，反之则称作感性领域。\
ESR除了受介电损耗的影响，还受电极自身抵抗行程的损耗影响。

高频范围：
共振点以上的高频率范围中的|Z|的特性由寄生电感(L)决定。高频范围的|Z|可由公式近似得出，与频率成正比趋势增加。\
ESR逐渐表现出电极趋肤效应及接近效应的影响。

    z=jωL

重要的是，频率越高，就越不能忽视寄生成分ESR或ESL的影响。随着电容器在高频领域的应用越来越多，ESR和ESL与静电容量值一样，成为表示电容器性能的重要参数。

## 各种电容器的频率特性

以上就电容器寄生成分ESR、ESL对频率特性的巨大影响进行了说明。电容器种类不同，则寄生成分也会有所不同。接下来对不同种类电容器频率特性的区别进行说明。

表示静电容量10uF各种电容器的|Z|及ESR的频率特性。除薄膜电容器以外，全是SMD型电容器。

![](/picture/11/img_23.png)

图所示电容器的静电容量值均为10uF，因此频率不足1kHz的容量范围|Z|均为同等值。但1kHz以上时，铝电解电容器或钽电解电容器的|Z|比多层陶瓷电容器或薄膜电容器大，这是因为铝电解电容器或钽电解电容器的电解质材料的比电阻升高，导致ESR增大。薄膜电容器或多层陶瓷电容器的电极中使用了金属材料，因此ESR很低。

多层陶瓷电容器和引脚型薄膜电容器在共振点附近的特性基本相同，但多层陶瓷电容器的自振频率高，感应范围的|Z|则较低。这是由于引脚型薄膜电容器中只有引脚线部分的电感增大了。

由以上结果可以得出，SMD型的多层陶瓷电容器在较宽的频率范围内阻抗都很低，也最适于高频用途。

## 获得频率特性数据的方法

    https://ds.murata.co.jp/simsurfing/mlcc.html?lcid=zh-cn

![](/picture/11/img_25.png)

# 12-10

![](/picture/11/img_26.png)

![](/picture/11/img_27.png)

![](/picture/11/img_28.png)

![](/picture/11/img_24.png)

阻抗曲线整体形状不变，但是各个频点的整体阻抗变小

## C0G-X7R-X5R-Y5V电容区别：

![](/picture/11/img_30.png)

## 陶瓷电容的直流偏压特性

在电容上加上直流电压，电容的实际容量会下降。电容的容量标识是在20℃，1V或者0.5V电压下测试的

![](/picture/11/img_31.png)

实际测试纹波>计算纹波，为什么

![](/picture/11/img_32.png)

![](/picture/11/img_33.png)

# 12-16

## 串口通信基础

串口通信，顾名思义也就是利用串行接口进行通信。串行接口指串口按位（bit）发送和接收字节。
尽管比按字节（byte）传输的并行通信慢，但是串口可以在使用一根线发送数据的同时用另一根线接收数据。

串口通信中比较重要的参数包括波特率、数据位、停止位及校验位，通讯双方需要约定一致的数据格式才能正常收发数据。
串行通讯可以进一步分为单工、半双工和全双工三种。在串口通信中，常用的协议包括RS-232、RS-422和RS-485。
它们的主要区别在于其各自的电平范围不相同。

### 串行通信

计算机与I/O设备之间，同一时刻，只能传输一个bit位的信号。传输数据按顺序依次一bit位接一bit位进行传输，通常数据在一根数据线或一对差分线上传输。

比如，当传输1字节信息时，并行通讯有8根信号线实现同时传输，假如耗时为1T，而串行是在一根信号线上，把数据排成一行、一位一位传输，需要传8次，因此耗时为8T。

### 并行通信

并行通信：计算机与I/O设备之间，通过多条传输线，可以同时传输多个bit位的信号。

* 并行通讯的效率高，但是成本高、对信号线路要求高，一般应用于快速设备之间近距离传输，譬如CPU 与存储设备、存储器与存储器、主机与打印机等都采用并行通讯。
* 串行通讯效率较低，但是对信号线路要求低，抗干扰能力强，同时成本也相对较低，一般用于计算机与计算机、计算机与外设之间远距离通讯。

![](/picture/12/img_1.png)

### 同步通信

同步通信要求发送和接收双方在进行数据传输时，保持完全的同步，因此，要求发收双方必须使用同频同相的同步时钟信号。
只需在传送报文的最前面附加特定的同步字符，使发收双方建立同步，此后在同步时钟的控制下逐位发送/接收。
这样，信息传输完全可以确定传输过程中每1位的位置。因此同步通信是一种比特同步通信技术。

![](/picture/12/img.png)

同步通信是一种连续传送数据的通信方式，一次通信传送一帧数据，每个信息帧用同步字符作为开始，字符间不加标识位。
（这里的数据帧比异步通信中的字符帧要大得多，通常含有若干个数据字符）。
当检测到有一串数位和同步字符相匹配时，就认为开始一个信息帧，于是，把此后的数位作为实际传输信息来处理。

同步通信以数据帧为单位，其格式包括：同步字符+数据+校验字符CRC。

* 单同步数据帧结构

| 同步字符 | 数据字符1 | 数据字符2 | ··· | 数据字符n | CRC1 | CRC1 |
|:----:|:-----:|:-----:|:-----:|:-----:|:----:|:----:|

* 双同步数据帧结构

| 同步字符1 | 同步字符2 | 数据字符1 | 数据字符2 | ··· | 数据字符n | CRC1 | CRC1 |
|:-----:|:-----:|:-----:|:-----:|:-----:|:----:|:----:|:-----:|

没有数据发送时，接收方要时刻做好接收数据的准备。在每组信息（通常称为帧）传输的开始，发送方先发送一个或两个特殊字符，
该字符称为同步字符。当接收方收到同步字符，并和发送方达到同步后，就可以以固定的节奏一个字符接一个字符地发送一大块数据，
而不再需要用起始位和停止位了，这样可以明显地提高数据的传输速率。同步通信更加适合对速度要求高的传输，对时序的要求很高，
当然对硬件要求也更高。

在没有信息要传输时，要填上空字符，因为同步传输不允许有间隙。在同步传输过程中，一个字符可以对应5～8位。
当然，对同一个传输过程，所有字符对应同样的数位，比如说n位。这样，传输时，收发双方用一个时钟进行协调，
按每n位划分为一个时间片，发送端在一个时间片中发送一个字符，接收端则在一个时间片中接收一个字符，
这样就可以确定传输中每一位的位置。接收数据时，接收方利用同步字符使内部时钟与发送方保持同步，
然后将同步字符后面的数据逐位移入，并转换成并行格式，供CPU读取，直至收到结束符为止。

## 异步通信

异步通信是按字符帧传输的，相对于同步通信，异步通信在发送字符时，所发送的字符之间的时隙可以是任意的，
接收方并不知道数据什么时候会到达，因此接收端必须时刻做好接收的准备（如果接收端主机的电源都没有加上，
那么发送端发送字符就没有意义，因为接收端根本无法接收）。发送端可以在任意时刻开始发送字符，时间间隔可以是任意的，
在一字符帧中的所有比特是连续发送的。

因此必须在每一个字符的开始和结束的地方加上标志，即加上开始位和停止位，以便使接收端能够正确地将每一个字符接收下来。
通信双方需要对采用的信息格式（字符的位数、停止位的位数、有无校验位及校验方式等)和数据的传输速率作相同的约定。
接收方是在数据的起始位和停止位的帮助下实现字符传送时的同步。这种传输通常是很小的分组，
比如一个字符为一组，为这个组配备起始位和结束位。

异步通信以字符为单位，其格式包括：起始位+数据+奇偶校验位+停止位。

![](/picture/12/img_2.png)

## 单工、半双工、全双工

![](/picture/12/img_3.png)

## 串口通信的检测

在通信过程中往往要对数据传送的正确与否进行校验。校验是保证准确无误传输数据的关键。常用的校验方法有奇偶校验、代码和校验及循环冗余码校验。

![](/picture/12/img_4.png)

* 奇偶校验

![](/picture/12/img_5.png)

![](/picture/12/img_6.png)

优缺点：\
奇偶校验的缺点很明显，首先，它对错误的检测概率大约只有50%。因为只有奇数个数据位发生变化能检测到，
如果偶数个数据位发生变化则无能为力了。另外，每传输一个字节都要附加一位校验位，对传输效率有较大影响。
因此，在高速数据通讯中很少采用奇偶校验。奇偶校验可以发现错误，但不能纠正错误，也就是说它只能告诉你出错了，
但不能告诉你怎么出错了，一旦发现错误，只能重发。

* 循环冗余校验（Cyclical Redundancy Check, CRC）`BV1V4411Z7VA`
    
异或运算：相同得0，相异得1

![](/picture/12/img_7.png)

![](/picture/12/img_8.png)

![](/picture/12/img_9.png)

![](/picture/12/img_10.png)

将校验和加在数据项之后，便是CRC校验的数据，

* 累加校验

![](/picture/12/img_11.png)

~~~
unit8_t CheckSum(unit_t *Buf,unit8_t Len)
{
    unit8_t i = 0;
    unit8_t sum = 0;
    unit8_t checksum = 0;
    
    for(i=0;i<Len;i++)
    {
        sum+ = *Buf++;
    }
    
    Checksum = sum & 0xff；
    return checksum;
}
~~~

## 传输速率与传输距离

比特率：每秒传输的二进制位数，也称为信号速率，单位为比特每秒（bit/s，bps）。

波特率：每秒传输的码元符号的个数（码元传输速率），也称为调制速率，单位是波特（B）。它是对符号传输速率的一种度量，它用单位时间内载波调制状态改变的次数来表示，
1波特即指每秒传输1个符号。通过不同的调制方法可以在一个符号上负载多个比特信息。

![](/picture/12/img_12.png)

![](/picture/12/img_13.png)

## 差分传输

差分信号：指在两根线上都传输信号，这两个信号的大小相等，极性相反，这两根线上传输的信号就是差分信号（差模信号），
简单的说就是在同一时间段内，通过比较这两个电压的差值来判断逻辑状态 “0” 还是 “1” 。这样就算受到了干扰也是同时。

![](/picture/12/img_19.png)

![](/picture/12/img_36.png)

单端信号：也叫单端走线；即平常所看到的单一数据线进行传输，从物理角度来讲，其实并不是只有一条线，它是有参考点的，
其参考点是地平面；实际是指用一根信号线和一根地线来传输信号。


## UART通用异步收发传输器

* UART全称是通用异步收发传输器（Universal Asynchronous Receiver/Transmitter)
* UART 是一种异步收发传输器, 是设备间进行异步通信的关键模块，UART负责处理数据总线和串行口之间的串/并、并/串转换，并规定了帧格式。
* 通信双方只要采用相同的帧格式和波特率，就能在未共享时钟信号的情况下，仅用两根信号线，接RX 和TX，就可以完成通信过程，是典型的异步串行通信。
* UART可以实现全双工传输和接收。
~~~
加上 S 则有同步（USART通用异步/同步收发传输器）
同步通信：有共同的参考时钟
异步通信：没有共同的参考时钟，以固定波特率传输
~~~
### 特点
* 通用串行异步收发器，全双工通信
* TTL电平标准：+3.3/+5表示1 0V表示0
* 需要双方约定好传输的波特率（因为没有时钟线）
* 空闲位是高位
* 不能连续发数据，一次最多发5-8位（防止误差累计，因为没有时钟线）

![](/picture/12/img_14.png)

![](/picture/12/img_15.png)

~~~
优点：
	通信只需要两条数据线；
	无需时钟信号；
	有奇偶校验位，方便通信的差错检查；
	只需要接收端和发送端设置好数据包结构，即可稳定通信；
缺点：
	传输速率较低：
		数据帧最大支持9位数据
	电气接口不统一：
		uart通信时一般使用处理器的电平，即TTL电平，但不同处理器电平存在差异（3.3V或1.8V，或CMOS电平）
		因此不同的处理器的uart不能直接相连接。此外不用的器件没有一个统一的接口，硬件连接不方便。
	抗干扰能力差：
		使用TTL的电平来表示1和0，传输中容易出错
	通信距离短：
		一般仅用于一个电路板上的2个芯片通信
~~~

## RS232（Recommended Standard推荐便准）

![](/picture/12/img_16.png)

### 电平标准

* 传输信号电压级别（重要）： +5 ～ +15 V表示1 5 ～ -15 V表示0
* 接收信号电压级别： 二进制0：+3 ～ +32 Vdc 二进制1：-3 ～ -30 Vdc
* 依赖UART串口协议，在电气层面做处理，统一了接口标准（如下），能传得更远和更快
* MCU通过TTL发出来的信号要接一个电平转换芯片去转成RS232的信号，如MAX232芯片。类似usb-ttl芯片（ch340，cp2302）

![](/picture/12/img_17.png)

这意味着其抗干扰能力变强了

### RS232的问题

* 接口的信号电平值较高，易损坏接口电路的芯片；
* 与TTL电平不兼容，所以需要使用电平转换芯片才能与TTL电路连接。
* 通信速度较低，易产生共模干扰，抗噪声干扰性较弱，传输距离较短(15m)

## RS485（差分信号输出、半双工）

![](/picture/12/img_18.png)

485转换芯片可以将输入的串口信号转化为差分信号

| 通信标准 | RS-232 | RS-422 | RS-485 2线 |
| --- | --- | --- | --- |
| 工作方式 | 单端 | 差分 | 差分 |
| 节点数（最多） | 1收1发 | 1发10收 | 1发32收 |
| 最大传输电缆长度 | 约15米（50英尺） | 约1219米（4000英尺） | 约1219米（4000英尺） |
| 最大传输速率 | 20Kbps | 10Mbps | 10Mbps |
| 最大驱动输出电压 | ±25V | -0.25V～+6V | -7V～+12V |
| 驱动器输出信号电平负载（最小值） | ±5V～±15V | ±2.0V | ±1.5V |
| 驱动器输出信号电平空载（最大值） | ±25V | ±6V | ±6V |
| 驱动器负载阻抗 | 3KΩ～7KΩ | 100Ω | 54Ω |
| 摆率（最大值） | 30V/μs | 不涉及（N/A） | 不涉及（N/A） |
| 接收器输入电压范围 | ±15V | ±10V | -7V～+12V |
| 接收器输入门限 | ±3V | ±200mV | ±200mV |
| 接收器输入电阻 | 3KΩ～7KΩ | ≥4KΩ | ≥12KΩ |
| 驱动器共模电压 | 不涉及（N/A） | ±3V | -1V～+3V |
| 接收器共模电压 | 不涉及（N/A） | ±7V | -7V～+12V|

## 通信总线协议IIC（Inter-Integrated Circuit）意思是芯片与芯片之间的通信

### IIC总线介绍
`BV1dg4y1H773`
* IIC总线是Philips公司推出的一种串行，半双工通信总线，主要用于近距离，低速的芯片之间的通信。
* 硬件结构简单，成本低，仅需2根双向的信号线，数据线SDA和时钟线SCL
* IIC是一种多主机总线，连接在IIC总线上的器件分为主机和从机，主机有权发起和结束一次通信，而从机只能被呼叫。
* 当总线上有多个主机同时启用总线时，IIC具有冲突检测和仲裁机制来防止错误产生。
* 每个连接到IIC总线上的器件都有一个唯一的地址（7bit），且每个器件都可以作为主机或者从机，总线上的器件的增加和删除不影响其它器件的正常工作。
* 将IIC总线上发送数据的器件叫做发送器，接收数据的器件叫做接收器，但并不是说主机就是发送器，主机可以发送数据，也可以接收数据。

![](/picture/12/img_20.png)

![](/picture/12/img_21.png)

![](/picture/12/img_22.png)

![](/picture/12/img_23.png)

### 起始信号和停止信号

* 空闲状态 ：总线处于空闲状态下，SDA和SCL都处于高电平
* 起始信号 ：SCL为高电平时，SDA由高变低
* 停止信号 ：SCL为高电平时，SDA由低变高
* 起始信号和停止信号都是由主机发出，起始信号产生后总线处于占有状态，停止信号发出后，总线处于空闲状态

![](/picture/12/img_24.png)

### 字节传送和应答

* 发送器每次发送8位数据，先发高位后发低位，例如发送0xAA (10101010B)，先发送高位1，发送顺序为 ：1 0 1 0 1 0 1 0
* 发送器发送完后，接收器发送1位来应答，0表示应答，1非应答，即一帧数据共有9位

![](/picture/12/img_25.png)

## SPI(Serial串行 Peripheral外设 Interface接口)

~~~
通信:
	2C为半双工			        SPI全双工
寻址：
	I2C有应答			        SPI无应答
	I2C通过向总线广播从机地址寻址		SPI通过使能不同CS引脚寻址
极性和相位：
	I2C时钟极性和相位固定                    SPI极性和相位有4种模式

~~~

SPI采用主从方式工作，一般有一个主机和一个从机或者一个主机和多个从机通信，不支持多主机。其中提供时钟的为主设备（Master），接收时钟的设备为从设备（Slave），
SPI接口的读写操作，都是由主设备发起，当存在多个从设备时，通过各自的片选信号进行管理。

![](/picture/12/img_26.png)

SPI至少需要4根线：
* SCLK : 时钟线
* MOSI : 主设备输出，从设备输入，主机发送从机接收
* MISO : 主设备输入，从设备输出，从机发送主机接收
* SS ：片选(slave select)，用于寻址，多个从设备可为多条

### SPI寻址方式

* 当主设备要和从设备进行通信时，主设备需要先将对应的从设备的片选线CS上发送使能信号，即将对应从设备连接的CS管脚拉高或者拉低，表示选中的该从设备。
* 使能信号为高电平还是低电平根据从机而定。
* 
![](/picture/12/img_27.png)

### SPI通信过程

* 通信原理：SPI主设备和从设备都有一个串行移位寄存器，主设备通过向它的SPI串行寄存器写入一个字节来发起一次传输

![](/picture/12/img_28.png)

* SPI数据传输时先发高位后发低位，例如发送0xAA (10101010B)，先发送高位1，发送顺序为 ：1 0 1 0 1 0 1 0
* 数据线的高电平表示逻辑 1，低电平表示逻辑 0
* SPI一个字节传送完成后，无需应答即可开始下一个字节的发送
* SPI采用同步方式工作，时钟线在上升沿或者下降沿时发送器向数据线上发送数据，紧接着在下降沿或者上升沿时接收器从数据线上读取数据，完成一个数据的传输，8个时钟周期完成一个字节的数据传输。

![](/picture/12/img_29.png)

### SPI设备时钟
* SPI时钟特点主要包括：时钟速率、时钟极性和时钟相位三方面。
* 时钟速率：SPI总线上的主设备必须在通信开始时候配置并生成相应的时钟信号。从理论上讲，只要实际可行，时钟速率就可以为任何速率，当然这个速率受限于每个系统能提供多大的系统时钟频率，以及最大的SPI传输速率。
* 时钟极性：根据硬件制造商的命名规则不同，时钟极性通常写为CKP或CPOL。时钟极性和相位共同决定读取数据的方式，
比如信号上升沿读取数据还是信号下降沿读取数据。

![](/picture/12/img_30.png)

这里时钟空闲是低电平，还有时钟空闲为高电平时

* 时钟相位 ：根据硬件制造商的不同，时钟相位通常写为CKE或CPHA。顾名思义，时钟相位/边沿，
也就是采集数据时是在时钟信号的具体相位或者边沿；

### SPI 4种工作模式

* SPI总线有4种工作模式，取决于极性CPOL和相位CPHA的设置
* CPOL表示SCLK空闲是的状态
  * CPOL = 0, 空闲时SCLK为低电平
  * CPOL = 1, 空闲时SCLK为高电平
* CPHA表示采样时刻
  * CPHA = 0，每个周期的第一个时钟沿采样
  * CPHA = 1，每个周期的第二个时钟沿采样

![](/picture/12/img_31.png)

四种SPI模式下的通信示例如下图，数据显示在MOSI和MISO线上，传输的开始和结束用绿色虚线表示，采样边沿用橙色虚线表示，移位边沿用蓝色虚线表示

1. SPI模式0，CPOL = 0，CPHA = 0：CLK空闲状态 = 低电平，数据在上升沿采样，并在下降沿移出。

![](/picture/12/img_32.png)

2. SPI模式1，CPOL = 0，CPHA = 1：CLK空闲状态 = 低电平，数据在下降沿采样，并在上升沿移出

![](/picture/12/img_33.png)

3. SPI模式2，CPOL = 1，CPHA = 1：CLK空闲状态 = 高电平，数据在下降沿采样，并在上升沿移出

![](/picture/12/img_34.png)

4. SPI模式3，CPOL = 1，CPHA = 0：CLK空闲状态 = 高电平，数据在上升沿采样，并在下降沿移出

![](/picture/12/img_35.png)

### SPI通信的优缺点

~~~
优点

无起始位和停止位，因此数据位可以连续传输而不会被中断；
没有像I2C这样复杂的从设备寻址系统；
数据传输速率比I2C更高（几乎快两倍）；
分离的MISO和MOSI信号线，因此可以同时发送和接收数据；
极其灵活的数据传输，不限于8位，它可以是任意大小的字；
非常简单的硬件结构，从站不需要唯一地址（与I2C不同）。
从机使用主机时钟，不需要精密时钟振荡器/晶振（与UART不同）。
不需要收发器（与CAN不同）。

缺点

使用四根信号线（I2C和UART使用两根信号线）；
无法确认是否已成功接收数据（I2C拥有此功能）；
没有任何形式的错误检查，如UART中的奇偶校验位；
只允许一个主设备；
没有硬件从机应答信号（主机可能在不知情的情况下无处发送）；
没有定义硬件级别的错误检查协议；
与RS-232和CAN总线相比，只能支持非常短的距离；
~~~

## CAN

CAN 是 Controller Area Network(控制器局域网) 的缩写（以下称为 CAN），
是 ISO 国际标准化的串行通信协议。在北美和西欧，CAN 总线协议已经成为汽车计算机控制系统和嵌入式工业控制局域网的标准总线，
并且拥有以 CAN 为底层协议专为大型货车和重工机械车辆设计的 J1939 协议

`BV14k4y187e6`

![](/picture/12/img_37.png)

## CPU、MCU、MPU、SOC的区别与应用

![](/picture/12/img_38.png)

1.CPU (Central Processing Unit) 中央处理器

CPU是由运算器（算术逻辑单元ALU）、控制器和寄存器及相应的总线构成。众所周知的三级流水线：取址、译码、执行的对象就是CPU，CPU从存储器或高速缓冲存储器中取出指令，
放入指令寄存器，并对指令译码，然后执行指令。而计算机的可编程性其实就是指对CPU的编程。

2.MCU (Micro Control Unit) 微控制器

MCU微控制器是一种将处理器核心（传统意义上的电脑cpu）、RAM、ROM、定时器和输入输出接口等功能集成在单个芯片上的微型计算机。
MCU 不需要外挂内存或其他外设，可以直接构建最小系统并执行程序。它主要用于控制任务，不需要强大的运算能力，适合执行简单的控制和响应任务。
当MCU微控制器芯片与其他外围电路连接时，就构成了一个完整的单片机系统。

* 功能：执行控制相关任务，通常用于较简单的应用，如传感器数据采集、设备控制等。
* 典型用途：家电控制、汽车电子、工业自动化、物联网设备等。
* 例子：8051、STC、STM32 Cortex-M 系列。
`tips:control是控制的意思，所以带“C”的芯片一般专注于计算处理，所以电脑CPU、GPU的功能可以类同。`

3.MPU (Micro Processor Unit) 微处理器

 MPU（微处理器）相对于MCU（微控制器）来说，具有更强大的计算能力，但不像MCU那样集成很多外围硬件功能。
 MPU通常不包含内存和复杂外设，本质上它就是cpu（电脑计算核心）的增强版，相对于传统电脑的cpu（计算核心）体积更小，
 通用功能会多一点点，所以它需要外挂内存（如DDR RAM、Flash等）和其他外设来支持其高计算能力，通常用于更复杂的应用，
 如运行操作系统、大型程序和多任务处理。因此通常情况下，为了支持更复杂的内存管理、操作系统和多任务处理，
 MPU 配备 MMU（将虚拟地址映射到物理地址，支持操作系统（如 Linux）中的内存管理和进程隔离，
 从而让多个应用程序可以共享系统资源而互不干扰） ，而 MCU 主要关注控制任务，不需要那么复杂的内存管理机制。
 所以MPU 和 MCU 可以通过是否包含 MMU 来作为区分的一项重要标准，但这个区分只是其中的一部分，
 不能完全代表二者的所有区别。

`tips:Processor是处理器的意思，所以带“P”的芯片一般专注于计算处理，所以电脑CPU、GPU的功能可以类同。`

* 功能：执行复杂的计算任务，通常支持大型操作系统，如 Linux。
* 典型用途：应用于个人计算机、高端嵌入式设备、移动设备等。
* 例子：ARM Cortex-A 系列、Intel x86。

4.SOC (System on Chip) 片上系统    

SOC片上系统是将 MCU 和 MPU 的功能结合在一起的集成电路，它既MCU那样有内置RAM、ROM同时又像MPU那样强大。
SOC 不仅包括 CPU、RAM 和 ROM，还集成了多种外设，并具备强大的处理能力。它能够运行操作系统，
因此适用于更复杂的应用。SOC 是系统级的芯片，能够提供较高的计算能力和灵活性。进一步来说，SOC（System on Chip）
是将整个系统的所有主要功能（包括 CPU、内存、外设控制等）集成到一块单芯片上的集成电路。它将计算、通信、
存储等功能全部集成在一起，减少了传统计算机系统中分立组件之间的连接和复杂度。我们所说的骁龙芯片就是一种典型的 SOC，
它将计算、图形处理、通信、多媒体等多个功能模块集成到一块芯片上，广泛应用于移动设备和嵌入式系统中，是目前市场上最常见的
SOC 之一。

* 功能：具备计算能力的同时，还集成了许多外设和功能模块，适合复杂系统的设计。
* 典型用途：
* 智能手机：大多数智能手机的处理器就是一个 SOC，例如 Qualcomm Snapdragon、Apple A 系列、Samsung Exynos 等，这些芯片集成了计算、图形处理、网络通信、音视频处理等多项功能。
* 嵌入式系统：许多物联网设备、智能家居、汽车电子、工业控制等领域也广泛使用 SOC 来实现高效、低功耗的功能。
* 平板电脑、智能电视、智能穿戴设备 等也常采用 SOC 进行集成。
* 例子：Qualcomm Snapdragon、NVIDIA Tegra、Apple A 系列。


## [API](https://blog.csdn.net/lph188/article/details/87979601)

API(Application Programming Interface)，即应用程序编程接口。

## QFP、PQFP、LQFP、TQFP封装形式及PCB详解

QFP（Quad Flat Package）为四侧引脚扁平封装，是表面贴装型封装之一，引脚从四个侧面引出呈海鸥翼(L)型。“小型方块平面分装",有行业人
叫他四方粒.它的缺点是引脚中心很小，容易弯曲 

![](/picture/12/img_39.png)

![](/picture/12/img_40.png)

PQFP（Plastic Quad Flat Package）就是塑料方形扁平封装。

原来，japon电子机械工业会将引脚中心距小于0.65mm 的QFP 称为QFP(FP)。但现在japon电子机械工业会对QFP 的外形规格进行了重新评价。在引脚中心距上不加区别，
而是根据封装本体厚度分为 QFP(2.0mm～3.6mm 厚)、LQFP(1.4mm 厚)和TQFP(1.0mm 厚)三种

![](/picture/12/img_41.png)

## [SMD元器件的封装形式](https://tiepian.smt.net/smd-fengzhuang.htm)

![](/picture/12/img_43.png)

## CPU的x86架构和ARM架构有啥区别

X86是基于复杂指令集（CISC, Complex Instruction Set Computing）。复杂指令集的特点是指令丰富，有专用指令来完成特定的功能，因此处理特殊任务的效率较高。但缺点是CPU需要包含丰富的电路单元，因而面积大、功耗大。

ARM是基于精简指令集（RISC, Reduced Instruction Set Computing），精简指令集顾名思义，指令数有限，设计者把主要精力放在那些经常使用的指令上，尽量使它们具有简单高效的特色。对复杂的功能，常通过组合指令来完成，因此在RISC机器上实现复杂功能时，可能效率较低。优点是CPU包含较少的单元电路，因而面积小、功耗低，且制造工艺简单、成本相对低廉。

举个乘法的例子来理解一下CISC和RISC的区别：CISC只要下发一条MULT的指令，就可以完成两个数的乘法，而RISC则需要下发一系列指令，包括Load，Prod，Store。

![](/picture/12/img_44.png)

# 12-17

## OC门、OD门

 OC门（Open Collector Gate）：集电极开路门，如图1所示，当N1导通时，输出低电平；
 当N1截止时，输出高阻态（电路的一种输出状态，既不是高电平也不是低电平，电路分析时可以理解为开路）。
 
 OD门（Open Drain Gate）：漏极开路门，如图2所示，与OC门类似，当N1导通时，输出低电平；当N1截止时，输出高阻态。
 
![](/picture/12/img_45.png)

![](/picture/12/img_46.png)

